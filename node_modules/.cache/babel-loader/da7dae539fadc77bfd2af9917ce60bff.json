{"ast":null,"code":"export const addMovie = movie => {\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    const firestore = getFirestore();\n    firestore.collection(\"Movies\").add({\n      AirportWest: Boolean(movie.AirportWest),\n      Classification: movie.classification,\n      Genre: movie.genre,\n      RunningTime: Number(movie.runningTime),\n      Title: movie.title,\n      Werribee: Boolean(movie.Werribee),\n      Watergardens: Boolean(movie.Watergardens)\n    }).then(() => {\n      dispatch({\n        type: \"ADD_MOVIE_SUCCESS\",\n        movie: movie\n      });\n      updateLocation(movie.title, movie, firestore);\n    }).catch(err => {\n      dispatch({\n        type: \"ADD_MOVIE_ERROR\",\n        err\n      });\n    });\n  };\n};\n\nfunction updateLocation(movieTitle, movie, firestore) {\n  var titleUpdate = {};\n  titleUpdate[movieTitle] = true;\n  var titleUpdateFalse = {};\n  titleUpdateFalse[movieTitle] = false;\n\n  if (movie.hasOwnProperty(\"Werribee\")) {\n    firestore.collection(\"Locations\").doc(\"Werribee\").update(movie.Werribee ? titleUpdate : titleUpdateFalse);\n  }\n\n  if (movie.hasOwnProperty(\"Watergardens\")) {\n    firestore.collection(\"Locations\").doc(\"Watergardens\").update(movie.Watergardens ? titleUpdate : titleUpdateFalse);\n  }\n\n  if (movie.hasOwnProperty(\"AirportWest\")) {\n    firestore.collection(\"Locations\").doc(\"AirportWest\").update(movie.AirportWest ? titleUpdate : titleUpdateFalse);\n  }\n}","map":{"version":3,"sources":["/Users/lawrencetrinh/Desktop/CC/Assignment 2/cloudproject-admin/src/store/actions/movieActions.js"],"names":["addMovie","movie","dispatch","getState","getFirebase","getFirestore","firestore","collection","add","AirportWest","Boolean","Classification","classification","Genre","genre","RunningTime","Number","runningTime","Title","title","Werribee","Watergardens","then","type","updateLocation","catch","err","movieTitle","titleUpdate","titleUpdateFalse","hasOwnProperty","doc","update"],"mappings":"AAAA,OAAO,MAAMA,QAAQ,GAAIC,KAAD,IAAW;AACjC,SAAO,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAACC,IAAAA,WAAD;AAAcC,IAAAA;AAAd,GAArB,KAAqD;AAC1D,UAAMC,SAAS,GAAGD,YAAY,EAA9B;AACAC,IAAAA,SAAS,CACNC,UADH,CACc,QADd,EAEGC,GAFH,CAEO;AACHC,MAAAA,WAAW,EAAEC,OAAO,CAACT,KAAK,CAACQ,WAAP,CADjB;AAEHE,MAAAA,cAAc,EAAEV,KAAK,CAACW,cAFnB;AAGHC,MAAAA,KAAK,EAAEZ,KAAK,CAACa,KAHV;AAIHC,MAAAA,WAAW,EAAEC,MAAM,CAACf,KAAK,CAACgB,WAAP,CAJhB;AAKHC,MAAAA,KAAK,EAAEjB,KAAK,CAACkB,KALV;AAMHC,MAAAA,QAAQ,EAAEV,OAAO,CAACT,KAAK,CAACmB,QAAP,CANd;AAOHC,MAAAA,YAAY,EAAEX,OAAO,CAACT,KAAK,CAACoB,YAAP;AAPlB,KAFP,EAWGC,IAXH,CAWQ,MAAM;AACVpB,MAAAA,QAAQ,CAAC;AAACqB,QAAAA,IAAI,EAAE,mBAAP;AAA4BtB,QAAAA,KAAK,EAAEA;AAAnC,OAAD,CAAR;AACAuB,MAAAA,cAAc,CAACvB,KAAK,CAACkB,KAAP,EAAclB,KAAd,EAAqBK,SAArB,CAAd;AACD,KAdH,EAeGmB,KAfH,CAeUC,GAAD,IAAS;AACdxB,MAAAA,QAAQ,CAAC;AAACqB,QAAAA,IAAI,EAAE,iBAAP;AAA0BG,QAAAA;AAA1B,OAAD,CAAR;AACD,KAjBH;AAkBD,GApBD;AAqBD,CAtBM;;AAwBP,SAASF,cAAT,CAAwBG,UAAxB,EAAoC1B,KAApC,EAA2CK,SAA3C,EAAsD;AACpD,MAAIsB,WAAW,GAAG,EAAlB;AACAA,EAAAA,WAAW,CAACD,UAAD,CAAX,GAA0B,IAA1B;AAEA,MAAIE,gBAAgB,GAAG,EAAvB;AACAA,EAAAA,gBAAgB,CAACF,UAAD,CAAhB,GAA+B,KAA/B;;AAEA,MAAI1B,KAAK,CAAC6B,cAAN,CAAqB,UAArB,CAAJ,EAAsC;AACpCxB,IAAAA,SAAS,CACNC,UADH,CACc,WADd,EAEGwB,GAFH,CAEO,UAFP,EAGGC,MAHH,CAGU/B,KAAK,CAACmB,QAAN,GAAiBQ,WAAjB,GAA+BC,gBAHzC;AAID;;AACD,MAAI5B,KAAK,CAAC6B,cAAN,CAAqB,cAArB,CAAJ,EAA0C;AACxCxB,IAAAA,SAAS,CACNC,UADH,CACc,WADd,EAEGwB,GAFH,CAEO,cAFP,EAGGC,MAHH,CAGU/B,KAAK,CAACoB,YAAN,GAAqBO,WAArB,GAAmCC,gBAH7C;AAID;;AACD,MAAI5B,KAAK,CAAC6B,cAAN,CAAqB,aAArB,CAAJ,EAAyC;AACvCxB,IAAAA,SAAS,CACNC,UADH,CACc,WADd,EAEGwB,GAFH,CAEO,aAFP,EAGGC,MAHH,CAGU/B,KAAK,CAACQ,WAAN,GAAoBmB,WAApB,GAAkCC,gBAH5C;AAID;AACF","sourcesContent":["export const addMovie = (movie) => {\n  return (dispatch, getState, {getFirebase, getFirestore}) => {\n    const firestore = getFirestore();\n    firestore\n      .collection(\"Movies\")\n      .add({\n        AirportWest: Boolean(movie.AirportWest),\n        Classification: movie.classification,\n        Genre: movie.genre,\n        RunningTime: Number(movie.runningTime),\n        Title: movie.title,\n        Werribee: Boolean(movie.Werribee),\n        Watergardens: Boolean(movie.Watergardens),\n      })\n      .then(() => {\n        dispatch({type: \"ADD_MOVIE_SUCCESS\", movie: movie});\n        updateLocation(movie.title, movie, firestore);\n      })\n      .catch((err) => {\n        dispatch({type: \"ADD_MOVIE_ERROR\", err});\n      });\n  };\n};\n\nfunction updateLocation(movieTitle, movie, firestore) {\n  var titleUpdate = {};\n  titleUpdate[movieTitle] = true;\n\n  var titleUpdateFalse = {};\n  titleUpdateFalse[movieTitle] = false;\n\n  if (movie.hasOwnProperty(\"Werribee\")) {\n    firestore\n      .collection(\"Locations\")\n      .doc(\"Werribee\")\n      .update(movie.Werribee ? titleUpdate : titleUpdateFalse);\n  }\n  if (movie.hasOwnProperty(\"Watergardens\")) {\n    firestore\n      .collection(\"Locations\")\n      .doc(\"Watergardens\")\n      .update(movie.Watergardens ? titleUpdate : titleUpdateFalse);\n  }\n  if (movie.hasOwnProperty(\"AirportWest\")) {\n    firestore\n      .collection(\"Locations\")\n      .doc(\"AirportWest\")\n      .update(movie.AirportWest ? titleUpdate : titleUpdateFalse);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}